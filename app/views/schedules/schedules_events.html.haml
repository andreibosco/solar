

= hidden_field_tag :allocation_tags_ids, params[:allocation_tags_ids]
= hidden_field_tag :all_groups_ids, params[:all_groups_ids]

.calendar_schedules{:"data-link-list" => calendar_schedules_path(allocation_tags_ids: params[:allocation_tags_ids], all_groups_ids: params[:all_groups_ids])}

  #calendar{:"data-edition" => "true", :"data-ids" => "chat,discussion,assignment,event"}


  = "Legenda:"
  %span.fc-event.fc-event-title.assignment="Trabalho"
  %span.fc-event.fc-event-title.chat="Chat"
  %span.fc-event.fc-event-title.discussion="Fórum"
  %span.fc-event.fc-event-title.presential_test="Prova presencial"
  %span.fc-event.fc-event-title.presential_meeting="Encontro presencial"
  %span.fc-event.fc-event-title.recess_holiday="Recesso ou feriado"
  %span.fc-event.fc-event-title.other="Outros"
  
= stylesheet_link_tag "fullcalendar.css"
= javascript_include_tag "fullcalendar", "calendar"

:javascript

  $(function(){
    // var dayNames = "<%= I18n.t(:month_names, scope: [:date]) %>";
    $("#chat")
      .html("Novo Chat")
      .call_fancybox({href: "#{new_chat_room_path(allocation_tags_ids: [params[:allocation_tags_ids]].flatten, calendar: true)}"});
    $("#discussion")
      .html("Novo Fórum")
      .call_fancybox({href: "#{new_discussion_path(allocation_tags_ids: [params[:allocation_tags_ids]].flatten, calendar: true)}"});
    $("#assignment")
      .html("Novo Trabalho")
      .call_fancybox({href: "#{new_assignment_path(allocation_tags_ids: [params[:allocation_tags_ids]].flatten, calendar: true)}"});
    $("#event")
      .html("Novo Evento")
      .call_fancybox({href: "#{new_schedule_event_path(allocation_tags_ids: [params[:allocation_tags_ids]].flatten, calendar: true)}"});
  });
  