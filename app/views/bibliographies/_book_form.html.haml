= simple_form_for(@bibliography, html: {id: "bibliography_form"}) do |f|
  %span.form_requirement= t(:required_fields)
  %h1#lightBoxDialogTitle= t((@bibliography.persisted? ? :edit : :new), scope: [:bibliographies, :form], bib_type: @bibliography.type)
    
  .form-inputs.block_content{"data-form-type" => @bibliography.persisted? ? "edit" : "new"}
    = hidden_field_tag :allocation_tags_ids, @allocation_tags_ids

    = f.input :type_bibliography, as: :hidden, input_html: {value: @bibliography.type_bibliography}
    = f.simple_fields_for :authors do |fa|
      .duplicatable_nested_form
        .inline
          = fa.input :name, required: true, placeholder: t(:author_placeholder, scope: [:bibliographies, :form])

          - if fa.object.new_record?
            = link_to content_tag(:i, nil, class: 'icon-minus'), '', remote: true, class: 'destroy_duplicate_nested_form'
          - else
            .destroy_author
              = fa.input :_destroy, as: :hidden
              = link_to content_tag(:i, nil, class: 'icon-minus'), '', remote: true, class: 'destroy_duplicate_nested_form'

    / falta colocar no lugar certo
    .input.string
      = link_to t(:add_author, scope: [:bibliographies, :form]), '', class: 'btn duplicate_nested_form'

    = f.input :title, as: :string
    = f.input :subtitle, as: :string
    .inline
      = f.input :address, required: true, input_html: {size: 20}
      = f.input :publisher, required: true, input_html: {size: 10}
    .inline
      = f.input :count_pages, as: :string, input_html: {size: 5}
      = f.input :volume, as: :string, input_html: {size: 5}
    .inline
      = f.input :edition, as: :string, required: true, input_html: {size: 5}
      = f.input :publication_year, as: :string, required: true, required: true, input_html: {size: 5}

    .input.group_label.invisible
      = f.label t(:groups, scope: [:bibliographies, :form])
      %span.groups
        - @groups_codes.each do |group_code|
          %span.collection_check_boxes= group_code

    .form-actions.right_buttons
      = button_to_function t(:cancel), "jQuery.fancybox.close()", class: "btn btn_default btn_lightbox", type: "button", alt: t(:cancel)
      = button_to_function t(:save), "save_bibliography()" , class: "btn btn_main btn_lightbox", alt: t(:save), type: "button"

/ = javascript_include_tag "bibliographies"
= javascript_include_tag "bibliography_authors"
