= javascript_include_tag "offers"
= javascript_include_tag "edition"

%span.form_requirement= t(:required_fields)
.offer_form{:style => "text-align: left;"}
  = simple_form_for(@offer, :html => {:id => "offer_form"}) do |f| 

    .form-inputs.block_content
      = hidden_field_tag(:allocation_tags_ids, @allocation_tags_ids) 
      - uc_and_course_names = get_uc_and_course_names(@allocation_tags_ids)

      .string
        = f.label t(".curriculum_unit")+"*"
        %span#text_as_label= uc_and_course_names["uc"]

      .string
        = f.label t(".course")+"*"
        %span#text_as_label= uc_and_course_names["course"]

      .string    
        = f.input :semester, :presence => true, :input_html => {:style => 'width: 40px'}
        - error_class = "field_with_errors" unless @date_range_error.blank?
        .string.required.label_color{:class => error_class}
          = f.label t(".date_range"), :required => true
          
          - start_date = @offer.start_date.nil? ? Date.today : @offer.start_date.to_date
          = text_field_tag :start_date, "", :value => (l(start_date, :format => :datepicker)), :id => "dt_start_date", :name => "offer[start_date]", :size => 10, :'data-default' => start_date

          = t(".to")

          - end_date = @offer.end_date.nil? ? Date.today + 3.month : @offer.end_date.to_date
          = text_field_tag :end_date, "", :value => (l(end_date, :format => :datepicker)), :id => "dt_end_date", :name => "offer[end_date]", :size => 10, :'data-default' => end_date
          %span{:style => "display: inline-block;"}= @date_range_error

      .string
        = f.label t(".enroll_period")
      - error_class_schedule = "field_with_errors" unless @schedule_error.blank?
      .string.required.label_color{:class => error_class_schedule}
        = f.label t(".start_date")+"*"

        - enroll_start = @offer.schedule.nil? ? Date.today : @offer.schedule.start_date.to_date
        = text_field_tag :enroll_start, "", :value => (l(enroll_start, :format => :datepicker)), :id => "dt_enroll_start", :size => 10, :'data-default' => enroll_start

        %span.enroll_end{:class => error_class_schedule}
          = t(".to")
          - enroll_end = ((@offer.schedule.nil? or @offer.schedule.end_date.nil?) ? Date.today + 3.month : @offer.schedule.end_date.to_date)
          = text_field_tag :enroll_end, "", :value => l(enroll_end, :format => :datepicker), :id => "dt_enroll_end", :size => 10, :'data-default' => enroll_end
          %span{:class => "error"}= @schedule_error

      .select_end_date.string
        = f.label " "
        = check_box_tag :define_enroll_end, true, (!(@offer.schedule.nil? or @offer.schedule.end_date.nil?) or !@schedule_error.blank?), :id => "final_enroll_date"
        = t(".enable_end_date")

      .form-actions.right_buttons_offers{:style => "padding-top: 10px;"}
        = button_tag t(".cancel"), :class => "btn btn_default btn_lightbox", :type => "button", :alt => t(".cancel"), :id => "cancel"
        = button_tag t(".save"), :class => "btn btn_main btn_lightbox", :alt => t(".save"), :type => "button", :id => "save"

:css
  .ui-datepicker{ 
    width: 15em; 
    padding: .2em .2em 0; 
    display: none;
    background-color: white;
  }
