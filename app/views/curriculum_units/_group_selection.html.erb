<%= form_for :curriculum_unit, :url => { }, :html => {:id => 'group_list_form'} do |f| %>
  <!--
      #select(@group_selected, options_from_collection_for_select(find_user_groups_by_curriculum_unit(session[:opened_tabs][session[:active_tab]]["id"]), :id, :code_semester), :onchange => "alert(#{@group_selected.id.to_s})")
      #select(session[:opened_tabs][session[:active_tab]]["groups_id"], :grupo,  options_from_collection_for_select(find_user_groups_by_curriculum_unit(session[:opened_tabs][session[:active_tab]]["id"]), :id, :code_semester), :onchange => "alert(#{session[:opened_tabs][session[:active_tab]]["groups_id"].to_s})")
  -->
  <%=
  select_tag(
    :group_selected,
    #:id,
    options_from_collection_for_select(
      find_user_groups_by_curriculum_unit(
        session[:opened_tabs][session[:active_tab]]["id"]),
      :id,
      :code_semester),
    #{:onchange => "alert(#{session[:opened_tabs][session[:active_tab]]["groups_id"].to_s})"}
    {:onchange => "reloadContent()"}
  )
%>
<% end %>

<script type="text/javascript">
  /*  $(function($) {
     $("#group_selected_id").change(function() {
       var groupId = $("#group_selected_id").val();
       alert(groupId);
       $.ajax({
          url: "/application/update_opened_tab_offer_and_group/",//caminho da chamada
          type: "POST",
          data: ({group_id : groupId}),
          async:false
        });
     })
  });
   */
  function reloadContent(){
    //var groupId = $("#group_selected_id").val();
    var groupId = $("#group_selected").val();
    alert(groupId);
    /*$.ajax({
      url: "/application/update_active_tab_offer_and_group/",//caminho da chamada
      type: "POST",
      data: ({group_id : groupId}),
      async:false
    });*/

    //Aqui, tratar o caminho real, com os parametros necessários e o metodo http correto
    var url = "./";//caminho da chamada
    $("#mysolar_content").load(url + " #mysolar_content" , {group_id: groupId, id: <%=session[:opened_tabs][session[:active_tab]]["id"]%>}, function(response, status, xhr) {
      if (status == "error") {
        var msg = "Erro na aplicação.\n Por favor, aguarde alguns instantes.";//internacionalizar
        alert(msg);
      }
    });
  }
</script>