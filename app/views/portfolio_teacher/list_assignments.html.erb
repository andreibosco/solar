<!-- Apresenta o nome da unidade curricular -->

<div>
  <span class="page_title">
    <%= t(:scores_of) %> <%= curriculum_unit_name %>
  </span>
</div>

<!-- Lista de atividades -->

<div class="portfolio_activity_list">

  <div class="portfolio_header_content">
    <div class="portfolio_title"><%= @student.name %></div>
    <div class="portfolio_image"><%= image_tag "icon_suitcase_portfolio.png", :alt=>t(:portfolio_icon) %></div>
  </div>

  <!-- Informacoes -->

  <div id="portfolio" class="portfolio portfolio_activity_list">
    <hr class="portfolio_line" />
    <div id="test">
      <table id="assignments_list" width="100%" cellpadding="0" cellspacing="0" border="0">
        <thead>
          <tr style="font-weight: bold;">
            <td class="td_blue_portfolio"><%= t(:tests) %></td>
            <td class="td_blue_portfolio" align="center" style="width: 22%;"><%= t(:date_name) %></td>
            <td class="td_blue_portfolio" align="center" style="width: 12%;"><%= t(:situation) %></td>
            <td class="td_blue_portfolio" align="center" style="width: 8%;"><%= t(:grade) %></td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="td_blue_portfolio">Prova I</td>
            <td class="td_blue_portfolio" align="center">2011-05-04</td>
            <td class="td_blue_portfolio" align="center">-</td>
            <td class="td_blue_portfolio" align="center">9.8</td>
          </tr>
        </tbody>
      </table>
    </div>
    <hr class="portfolio_table_division" />
    <div id="assignments">
      <table id="assignments_list" width="100%" cellpadding="0" cellspacing="0" border="0">
        <thead>
          <tr style="font-weight: bold;">
            <td class="td_blue_portfolio"><%= t(:assignments) %></td>
            <td class="td_blue_portfolio" align="center" style="width: 22%;"><%= t(:date_name) %></td>
            <td class="td_blue_portfolio" align="center" style="width: 12%;"><%= t(:situation) %></td>
            <td class="td_blue_portfolio" align="center" style="width: 8%;"><%= t(:grade) %></td>
          </tr>
        </thead>
        <tbody>
          <% @activities.each_with_index do |activity, idx| %>
            <% class_name = ((idx % 2) == 0) ? 'rowtable_even' : 'rowtable_odd' %>
            <tr class="<%= class_name %>">
              <td class="td_blue_portfolio"><%=link_to activity["assignments_name"], {:action => :student_detail, :id => @student.id, :assignment_id => activity["assignment_id"],:send_assignment_id => activity["send_assignment_id"]} %></td>
              <td class="td_blue_portfolio" align="center"><%=l activity["start_date"].to_time, :format => :normal %> - <%=l activity["end_date"].to_time, :format => :normal %></td>
              <td class="td_blue_portfolio assignment_<%= activity["situation"] %>" align="center"><%= t(activity["situation"].to_sym) %></td>
              <td class="td_blue_portfolio" align="center"><%= (activity["grade"].nil?) ? '-' : activity["grade"].to_f %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <hr class="portfolio_table_division" />
    <div id="participation">
      <table id="assignments_list" width="100%" cellpadding="0" cellspacing="0" border="0">
        <thead>
          <tr style="font-weight: bold;">
            <td class="td_blue_portfolio"><%= t(:participation) %></td>
            <td class="td_blue_portfolio" align="center" style="width: 22%;"><%= t(:date_name) %></td>
            <td class="td_blue_portfolio" align="center" style="width: 12%;"><%= t(:situation) %></td>
            <td class="td_blue_portfolio" align="center" style="width: 8%;"><%= t(:grade) %></td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="td_blue_portfolio">Participacao I</td>
            <td class="td_blue_portfolio" align="center">2011-05-04</td>
            <td class="td_blue_portfolio" align="center">-</td>
            <td class="td_blue_portfolio" align="center">9.8</td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>

</div>

<!-- Quantidade de participacoes -->

<div class="portfolio_activity_list">

  <div class="portfolio_header_content">
    <div class="portfolio_title">Qtd de participacao</div>
    <div class="portfolio_image"><%= image_tag "icon_suitcase_portfolio.png", :alt=>t(:portfolio_icon) %></div>
  </div>

  <!-- Informacoes -->
  <div id="portfolio" class="portfolio portfolio_activity_list">
    <hr class="portfolio_line" />

    <table width="100%" cellspacing="0">
      <thead>
        <tr>
          <td style="width: 80%;"></td>
          <td style="width: 20%;" align="center">Qtd</td>
        </tr>
      </thead>
      <tbody>
        <% @discussions.each_with_index do |discussion, idx| %>
          <tr class="rowtable_<%= (idx % 2 == 0) ? 'even' : 'odd' %>">
            <td class="td_blue_portfolio"><%= discussion["name"] %></td>
            <td class="td_blue_portfolio show_posts" align="center">
              <%=link_to discussion["qtd"], {:controller => :discussions, :action => :show_posts, :id => discussion["discussion_id"], :student_id => @student.id} %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>

  </div>
</div>

<!-- Apresentacao dos posts do aluno -->

<div id="all_posts" style="display: none; width: 700px; border: 1px solid #000;"></div>

<!-- Scripts -->

<div id="scripts">
  <script type="text/javascript">
    $(function(){
      // requisicao ajax para recuperar posts do usuario
      $('td.show_posts').click(function(){
        $.ajax({
          type: 'GET',
          url: $('a', $(this)).attr('href'),
          cache: false,
          //context: document.body,
          success: function(response){
            $('#all_posts').html(response).css('display', 'block');
          },
          complete: function(response){
            // verifica se foi gerado algum erro
            if (parseInt(response.status) != 200) {
              alert('Erro ao tentar consultar');
            }

            // fechar a janela de exibicao
            $('#window_close').click(function(){
              $('#all_posts').css('display', 'none');
            });
          }
        });

        return false;

      });

    });
  </script>
</div>

<!--
<div class="ep-recl-dialog" tabindex="0" role="dialog" aria-labelledby=":2k" style="left: 426.5px; top: 190px; ">
  <div class="ep-recl-dialog-title ep-recl-dialog-title-draggable" id=":2k">
    <span class="ep-recl-dialog-title-text">Repetir</span>
    <span class="ep-recl-dialog-title-close">
    </span>
  </div>
  <div class="ep-recl-dialog-content">
    <div id=":24.editordialog">
      <table class="ep-rec">
        <tbody>
          <tr>
            <th>Repetição:</th>
            <td>
              <select id=":2n.frequency">
                <option value="0">Todos os dias</option>
                <option value="1">Todos os dias da semana (seg. a sex.)</option>
                <option value="2">Todas as segundas, quartas e sextas.</option>
                <option value="3">Todas as terças e quintas.</option>
                <option value="4">Semanal:</option>
                <option value="5">Mensal</option>
                <option value="6">Anual</option>
              </select>
            </td>
          </tr>
        </tbody>
        <tbody>
          <tr>
            <th>Repete a cada:</th>
            <td>
              <select id=":2o.interval">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
              </select>
              <label>semanas</label>
            </td>
          </tr>
          <tr>
            <th>Repete:</th>
            <td id=":2o.checkboxes">
              <div>
                <span class="">
                  <input id=":2o.dow0" name="SU" type="checkbox">
                  <label for=":2o.dow0">D</label>
                </span>
                <span class="">
                  <input id=":2o.dow1" name="MO" type="checkbox">
                  <label for=":2o.dow1">S</label>
                </span>
                <span class="">
                  <input id=":2o.dow2" name="TU" type="checkbox" checked="">
                  <label for=":2o.dow2">T</label>
                </span>
                <span class="">
                  <input id=":2o.dow3" name="WE" type="checkbox">
                  <label for=":2o.dow3">Q</label>
                </span>
                <span class="">
                  <input id=":2o.dow4" name="TH" type="checkbox">
                  <label for=":2o.dow4">Q</label>
                </span>
                <span class="">
                  <input id=":2o.dow5" name="FR" type="checkbox">
                  <label for=":2o.dow5">S</label>
                </span>
                <span class="">
                  <input id=":2o.dow6" name="SA" type="checkbox">
                  <label for=":2o.dow6">S</label>
                </span>
              </div>
            </td>
          </tr>
          <tr>
            <th>Início em:</th>
            <td>
              <input id=":2o.rstart" size="10" disabled="" autocomplete="off">
            </td>
          </tr>
          <tr>
            <th class="ep-rec-ends-th">Termina:</th>
            <td>
              <span class="ep-rec-ends-opt">
                <input id=":2o.endson_never" name="endson" type="radio" checked="">
                <label for=":2o.endson_never">Sempre</label>
              </span>
              <span class="ep-rec-ends-opt">
                <input id=":2o.endson_count" name="endson" type="radio">
                <label for=":2o.endson_count">Após <input id=":2o.endson_count_input" size="3" value="" disabled=""> ocorrências</label>
              </span>
              <span class="ep-rec-ends-opt">
                <input id=":2o.endson_until" name="endson" type="radio">
                <label for=":2o.endson_until">Em <input id=":2o.endson_until_input" size="10" value="" disabled="" autocomplete="off">
                </label>
              </span>
            </td>
          </tr>
          <tr>
            <th>Resumo:</th>
            <td class="ep-rec-summary">Semanal: cada terça-feira</td>
          </tr>
        </tbody>
        <tbody>
          <tr>
            <th>
            </th>
            <td class="ep-rec-buttons-padding">
              <div>
                <div class="goog-inline-block goog-imageless-button" title="" role="button" style="-webkit-user-select: none; " tabindex="0">
                  <div class="goog-inline-block goog-imageless-button-outer-box">
                    <div class="goog-inline-block goog-imageless-button-inner-box">
                      <div class="goog-imageless-button-pos">
                        <div class="goog-imageless-button-top-shadow">&nbsp;</div>
                        <div class="goog-imageless-button-content">Concluído</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="goog-inline-block goog-imageless-button" title="" role="button" style="-webkit-user-select: none; " tabindex="0">
                  <div class="goog-inline-block goog-imageless-button-outer-box">
                    <div class="goog-inline-block goog-imageless-button-inner-box">
                      <div class="goog-imageless-button-pos">
                        <div class="goog-imageless-button-top-shadow">&nbsp;</div>
                        <div class="goog-imageless-button-content">Cancelar</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="ep-recl-dialog-buttons">
    <button name="ok" class="goog-buttonset-default">OK</button>
    <button name="cancel">Cancel</button>
  </div>
  <span tabindex="0">
  </span>
</div>
-->